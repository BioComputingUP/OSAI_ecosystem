<style>
  .btn-contribute-github-custom {
    background-color: #103344;
    border-color: #103344;
    color: white;
    display: inline-flex;
    align-items: center;
    transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out;
  }

  .btn-contribute-github-custom:hover {
    background-color: darken(#103344, 10%);
    border-color: darken(#103344, 10%);
    color: white;
  }

  .osai-recommendations-details {
    margin-bottom: 20px;
    background-color: #103344;
    border: 1px solid darken(#103344, 5%);
    border-radius: 4px;
    padding: 10px;
    color: white;
    transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out;
  }

  .osai-recommendations-details:hover {
    background-color: darken(#103344, 5%);
    border-color: darken(#103344, 10%);
  }

  .osai-recommendations-details summary {
    cursor: pointer; 
    font-weight: bold; 
    margin-bottom: 5px; 
    color: white;
  }

  .table.table-bordered {
    border-radius: 4px; /* Match other elements like osai-recommendations-details */
    overflow: hidden; /* Ensures child elements (th, td) are clipped to the rounded corners */
  }
</style>
<div class="ecosystem-container">
  <!-- Lighter, more cohesive page header -->
  <div class="page-header text-center py-4">
    <div class="container">
      <h1 class="page-title">OSAI: Open and Sustainable AI Ecosystem Components</h1>
      <p class="page-subtitle">Discover and explore tools, standards, and resources that support implementing the OSAI recommendations</p>
      
      <div class="action-buttons">
        <a href="/guidelines" class="btn-action">
          <img src="assets/img/book-solid.svg" alt="Guidelines icon">
          OSAI Guidelines
        </a>
        <a href="https://github.com/gavinf97/OSAI_ecosystem" target="_blank" rel="noopener noreferrer" class="btn-secondary-action">
          <img src="https://cdnjs.cloudflare.com/ajax/libs/octicons/8.5.0/svg/mark-github.svg" alt="GitHub logo" style="filter: invert(1) brightness(2);">
          Contribute on GitHub
        </a>
        <a href="https://fairsharing.org/AIResources" target="_blank" rel="noopener noreferrer" class="btn-action">
          <img src="assets/img/database-solid.svg" alt="Database icon">
          Explore AI Databases on FAIRsharing
        </a>
      </div>
    </div>
  </div>
  
  <div class="container">
    <!-- Filters Section -->
    <div class="filters-section">
      <h2 class="filters-title" style="color: #F66729;">
        <i class="icon icon-common icon-filter" style="color: #F66729;"></i>
        Filter Components
      </h2>
      
      <div class="filters-grid">
        <div class="filter-group">
          <label for="searchTerm" class="filter-label">Search</label>
          <input type="text" id="searchTerm" class="filter-input" [(ngModel)]="searchTerm" (ngModelChange)="applyFilters()" placeholder="Enter search term...">
        </div>
        
        <div class="filter-group">
          <label for="typeFilter" class="filter-label">Type</label>
          <select id="typeFilter" class="filter-select" [(ngModel)]="selectedType" (ngModelChange)="applyFilters()">
            <option *ngFor="let type of availableTypes" [value]="type">{{ type }}</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="recommendationFilter" class="filter-label">OSAI Recommendation</label>
          <select id="recommendationFilter" class="filter-select" [(ngModel)]="selectedRecommendation" (ngModelChange)="applyFilters()">
            <option *ngFor="let rec of availableRecommendations" [value]="rec.value">
              {{ rec.displayName === 'R9 - Impact' ? 'R9 - Monitoring' : rec.displayName }}
            </option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="accessModelFilter" class="filter-label">Access Model</label>
          <select id="accessModelFilter" class="filter-select" [(ngModel)]="selectedAccessModel" (ngModelChange)="applyFilters()">
            <option *ngFor="let model of availableAccessModels" [value]="model">{{ model }}</option>
          </select>
        </div>
      </div>
    </div>
    
    <!-- Results Section -->
    <div class="results-section">
      <!-- Loading state -->
      <div *ngIf="isLoading" class="loading-spinner">
        <div class="spinner"></div>
        <p class="mt-3 text-center text-muted">Loading ecosystem components...</p>
      </div>
      
      <!-- Error state -->
      <div *ngIf="errorLoading" class="empty-state">
        <i class="icon icon-common icon-exclamation-triangle"></i>
        <h3>Error Loading Data</h3>
        <p>There was a problem loading the ecosystem components. Please try again later.</p>
        <button class="btn-action mt-3" (click)="loadData()">Retry</button>
      </div>
      
      <!-- Empty state for when there are no results -->
      <div *ngIf="filteredData.length === 0 && originalData.length > 0 && !isLoading" class="empty-state">
        <i class="icon icon-common icon-search"></i>
        <h3>No Matching Results</h3>
        <p>Try adjusting your filters to find what you're looking for.</p>
      </div>
      
      <!-- Results content -->
      <ng-container *ngIf="filteredData.length > 0">
        <!-- Results header with count -->
        <div class="results-header">
          <div class="results-count">{{ filteredData.length }} components</div>
        </div>
        
        <!-- Modern table for components -->
        <div class="table-responsive">
          <table class="ecosystem-table">
            <!-- Column item type header row -->
            <thead>
              <tr style="background-color: #f8f9fa; color: #103344; font-weight: 600; font-size: 1.15rem;">
                <td>Type</td>
                <td>Name</td>
                <td>Description</td>
                <td>Recommendations</td>
                <td>Access</td>
                <td>Links</td>
              </tr>
            </thead>
            <thead class="table-header-custom" style="font-size: 1.15rem;">
              <tr>
                <th>Type</th>
                <th>Name</th>
                <th>Description</th>
                <th>Recommendations</th>
                <th>Access</th>
                <th>Links</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of paginatedData">
                <td>
                  <span class="table-type-badge">{{ item.type || 'N/A' }}</span>
                </td>
                <td>
                  <div class="component-name">
                    <a *ngIf="item.url" [href]="item.url" target="_blank" rel="noopener noreferrer">{{ item.name || 'N/A' }}</a>
                    <span *ngIf="!item.url">{{ item.name || 'N/A' }}</span>
                  </div>
                </td>
                <td>
                  <div class="component-description">
                    {{ item.description || 'No description available' }}
                    <div *ngIf="item['osai-explanation']" class="mt-2">
                      <strong>Relevance:</strong> {{ item['osai-explanation'] }}
                    </div>
                  </div>
                </td>
                <td>
                  <div *ngIf="item['osai-recommendation']" class="table-recommendation-tags">
                    <span *ngFor="let rec of item['osai-recommendation'].split(',')" class="table-recommendation-tag">
                      {{ rec.trim() }}
                    </span>
                  </div>
                  <span *ngIf="!item['osai-recommendation']">N/A</span>
                </td>
                <td>
                  <span *ngIf="item['access-model']" class="table-access-model">{{ item['access-model'] }}</span>
                  <span *ngIf="!item['access-model']">N/A</span>
                </td>
                <td>
                  <div class="table-external-links" style="display: flex; flex-wrap: wrap; gap: 8px;">
                    <a *ngIf="item.url" [href]="item.url" target="_blank" rel="noopener noreferrer" class="table-external-link" style="display: inline-flex; align-items: center;">
                      <i class="icon icon-common icon-external-link-alt" style="margin-right: 6px;"></i>
                      Website
                    </a>
                    <a *ngIf="item['biotools-url']" [href]="item['biotools-url']" target="_blank" rel="noopener noreferrer" class="table-external-link" style="display: inline-flex; align-items: center;">
                      <i class="icon icon-common icon-tools" style="margin-right: 6px;"></i>
                      <i class="icon icon-common icon-share-alt" style="margin-right: 6px;"></i>
                      bio.tools
                    </a>
                    <a *ngIf="item['fairsharing-url']" [href]="item['fairsharing-url']" target="_blank" rel="noopener noreferrer" class="table-external-link" style="display: inline-flex; align-items: center;">
                      <i class="icon icon-common icon-share-alt" style="margin-right: 6px;"></i>
                      FAIRsharing
                    </a>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <!-- Pagination controls -->
        <div class="pagination-section">
          <div class="pagination-info">
            Showing {{ (currentPage - 1) * itemsPerPage + 1 }} - {{ currentPage * itemsPerPage > filteredData.length ? filteredData.length : currentPage * itemsPerPage }} of {{ filteredData.length }} items
          </div>
          
          <div class="pagination-controls">
            <button class="pagination-btn" (click)="previousPage()" [disabled]="currentPage === 1">
              Previous
            </button>
            
            <ng-container *ngFor="let pageNum of pageNumbers">
              <button *ngIf="pageNum === 1 || pageNum === totalPages || (pageNum >= currentPage - 2 && pageNum <= currentPage + 2)"
                      class="pagination-btn" 
                      [class.active]="pageNum === currentPage"
                      (click)="goToPage(pageNum)">
                {{ pageNum }}
              </button>
              <span *ngIf="(pageNum === currentPage - 3 && currentPage > 4) || (pageNum === currentPage + 3 && currentPage < totalPages - 3)">...</span>
            </ng-container>
            
            <button class="pagination-btn" (click)="nextPage()" [disabled]="currentPage === totalPages">
              Next
            </button>
          </div>
          
          <div class="items-per-page">
            <label for="itemsPerPage">Items per page:</label>
            <select id="itemsPerPage" [(ngModel)]="itemsPerPage" (ngModelChange)="applyFilters()">
              <option [ngValue]="10">10</option>
              <option [ngValue]="25">25</option>
              <option [ngValue]="50">50</option>
              <option [ngValue]="100">100</option>
            </select>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</div>
